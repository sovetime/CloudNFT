spring:
  application:
    name: @application.name@
  config:
    import: classpath:base.yml,classpath:rpc.yml,classpath:cache.yml,classpath:stream.yml
  cloud:
    function:
      # 定义可用的函数列表，包括新购买、普通购买取消、普通购买预取消
      definition: newBuy;newBuyPLus;normalBuyCancel;normalBuyPreCancel;newBuyPlusCancel;newBuyPlusPreCancel
    stream:
      rocketmq:
        bindings:
          # 新购买消息输出绑定配置
          newBuy-out-0:
            # 生产者配置
            producer:
              # 生产者类型为事务类型
              producerType: Trans
              # 事务监听器为库存减少事务监听器
              transactionListener: inventoryDecreaseTransactionListener
          newBuyPlus-out-0:
            producer:
              producerType: Trans
              transactionListener: orderCreateTransactionListener
      # 消息绑定配置
      bindings:
        # 新购买消息输出通道配置
        newBuy-out-0:
          # 消息内容类型为JSON格式
          content-type: application/json
          # 目标主题为新购买主题
          destination: new-buy-topic
          # 消费者组为交易组
          group: trade-group
          # 使用的绑定器为RocketMQ
          binder: rocketmq
        newBuyPlus-out-0:
          content-type: application/json
          destination: new-buy-topic
          group: new-buy-plus-group
          binder: rocketmq
        # 订单关闭消息输入通道配置
        orderClose-in-0:
          content-type: application/json
          destination: order-close-topic
          group: order-group
          binder: rocketmq
        # 普通购买取消消息输出通道配置
        normalBuyCancel-out-0:
          content-type: application/json
          destination: normal-buy-cancel-topic
          group: trade-cancel-group
          binder: rocketmq
        # 普通购买预取消消息输出通道配置
        normalBuyPreCancel-out-0:
          content-type: application/json
          destination: normal-buy-pre-cancel-topic
          group: trade-pre-cancel-group
          binder: rocketmq
        newBuyPlusCancel-out-0:
          content-type: application/json
          destination: new-buy-plus-cancel-topic
          group: new-buy-plus-cancel-group
          binder: rocketmq
        newBuyPlusPreCancel-out-0:
          content-type: application/json
          destination: new-buy-plus-pre-cancel-topic
          group: new-buy-plus-pre-cancel-group
          binder: rocketmq
        # 普通购买取消消息输入通道配置
        normalBuyCancel-in-0:
          content-type: application/json
          destination: normal-buy-cancel-topic
          group: trade-cancel-group
          binder: rocketmq
        # 普通购买预取消消息输入通道配置
        normalBuyPreCancel-in-0:
          content-type: application/json
          destination: normal-buy-pre-cancel-topic
          group: trade-pre-cancel-group
          binder: rocketmq
        newBuyPlusCancel-in-0:
          content-type: application/json
          destination: new-buy-plus-cancel-topic
          group: new-buy-plus-cancel-group
          binder: rocketmq
        newBuyPlusPreCancel-in-0:
          content-type: application/json
          destination: new-buy-plus-pre-cancel-topic
          group: new-buy-plus-pre-cancel-group
          binder: rocketmq

server:
  port: 8084

#dubbo:
#  # 关闭启动时检查
#  consumer:
#    check: false
#  application:
#    name: nft-turbo-trade
